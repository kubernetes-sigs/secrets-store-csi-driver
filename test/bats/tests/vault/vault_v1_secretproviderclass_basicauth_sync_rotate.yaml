apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: vault-basicauth-sync-rotate
spec:
  provider: vault
  secretObjects:
  - secretName: basicauthsecret
    type: kubernetes.io/basic-auth
    labels:                                   
      environment: "test"
    annotations:
      kubed.appscode.com/sync: "app=test"
    data:
    - key: username
      objectName: db-basicauth-username
    - key: password
      objectName: db-basicauth-password
  parameters:
    vaultAddress: "http://vault.vault:8200"
    roleName: "csi"
    objects:  |
      - objectName: db-basicauth-username
        secretPath: secret/data/db-basicauth
        secretKey: username
      - objectName: db-basicauth-password
        secretPath: secret/data/db-basicauth
        secretKey: password